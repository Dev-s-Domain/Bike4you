import Button from '@mui/material/Button';
import { styled } from '@mui/material/styles';
import Dialog from '@mui/material/Dialog';
import DialogTitle from '@mui/material/DialogTitle';
import DialogContent from '@mui/material/DialogContent';
import DialogActions from '@mui/material/DialogActions';
import Typography from '@mui/material/Typography';
import { useEffect, useState } from 'react';
import { bikeEndpoint } from '../../service/bike';
import { Link } from 'react-router-dom';

interface Owner {
  nome: string
  email: string
  phone: string
}

const BootstrapDialog = styled(Dialog)(({ theme }) => ({
  '& .MuiDialogContent-root': {
    padding: theme.spacing(2),
  },
  '& .MuiDialogActions-root': {
    padding: theme.spacing(1),
  },
}));

export default function ContactDialogs({ idBike }) {
  const [open, setOpen] = useState(false);
  const [data, setData] = useState<Owner>({
    nome: '',
    email: '',
    phone: ''
  });

  useEffect(() => {
    async function OwnerData() {
      const query = await fetch(bikeEndpoint + `/modal?idBike=${idBike}`);
      query.json().then((res) => {
        setData(res);
      })
    }
    OwnerData()
  }, [])


  console.log(data)

  const handleClickOpen = () => {
    setOpen(true);
  };
  const handleClose = () => {
    setOpen(false);
  };

  return (
    <>
      <Button variant="outlined" color="primary" onClick={handleClickOpen} sx={{ fontWeight: "bold" }}>
        Reservar
      </Button>
      <BootstrapDialog
        onClose={handleClose}
        aria-labelledby="customized-dialog-title"
        open={open}
      >



        <DialogTitle sx={{ m: 0, p: 2 }} id="customized-dialog-title">
          Nome do locador: {data.nome}
        </DialogTitle>

        <DialogContent dividers>
          <Typography gutterBottom>
            Telefone: {data.phone}
          </Typography>
          <Typography gutterBottom>
            E-mail: {data.email}
          </Typography>
          <Link style={{ border: 'none' }} target='_blank' to={`https://wa.me//${data.phone}?text=${data.nome},%20Tenho%20interesse%20em%20alugar%20sua%20bike`}>
            <svg width="248" height="52" viewBox="0 0 248 52" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="248" height="52" rx="26" fill="#07DD73" />
              <path d="M45.8337 27.6667C45.667 27.5834 44.5837 27.0834 44.417 27C44.2503 26.9167 44.0837 26.9167 43.917 27.0834C43.7503 27.25 43.417 27.75 43.2503 27.9167C43.167 28.0834 43.0003 28.0834 42.8337 28C42.2503 27.75 41.667 27.4167 41.167 27C40.7503 26.5834 40.3337 26.0834 40.0003 25.5834C39.917 25.4167 40.0003 25.25 40.0837 25.1667C40.167 25.0834 40.2503 24.9167 40.417 24.8334C40.5003 24.75 40.5837 24.5834 40.5837 24.5C40.667 24.4167 40.667 24.25 40.5837 24.1667C40.5003 24.0834 40.0837 23.0834 39.917 22.6667C39.8337 22.0834 39.667 22.0834 39.5003 22.0834C39.417 22.0834 39.2503 22.0834 39.0837 22.0834C38.917 22.0834 38.667 22.25 38.5837 22.3334C38.0837 22.8334 37.8337 23.4167 37.8337 24.0834C37.917 24.8334 38.167 25.5834 38.667 26.25C39.5837 27.5834 40.7503 28.6667 42.167 29.3334C42.5837 29.5 42.917 29.6667 43.3337 29.75C43.7503 29.9167 44.167 29.9167 44.667 29.8334C45.2503 29.75 45.7503 29.3334 46.0837 28.8334C46.2503 28.5 46.2503 28.1667 46.167 27.8334C46.167 27.8334 46.0003 27.75 45.8337 27.6667ZM47.917 20.0834C44.667 16.8334 39.417 16.8334 36.167 20.0834C33.5003 22.75 33.0003 26.8334 34.8337 30.0834L33.667 34.3334L38.0837 33.1667C39.3337 33.8334 40.667 34.1667 42.0003 34.1667C46.5837 34.1667 50.2503 30.5 50.2503 25.9167C50.3337 23.75 49.417 21.6667 47.917 20.0834ZM45.667 31.75C44.5837 32.4167 43.3337 32.8334 42.0003 32.8334C40.7503 32.8334 39.5837 32.5 38.5003 31.9167L38.2503 31.75L35.667 32.4167L36.3337 29.9167L36.167 29.6667C34.167 26.3334 35.167 22.1667 38.417 20.0834C41.667 18 45.8337 19.0834 47.8337 22.25C49.8337 25.5 48.917 29.75 45.667 31.75Z" fill="white" />
              <path d="M68.952 31V21.2H75.35V22.642H70.744V25.33H74.93V26.73H70.744V29.558H75.35V31H68.952ZM77.0458 31V21.2H78.8378L83.4438 28.102V21.2H85.2358V31H83.4438L78.8378 24.112V31H77.0458ZM89.4176 31V22.642H86.5616V21.2H94.0796V22.642H91.2096V31H89.4176ZM95.4071 31V21.2H99.0051C99.7891 21.2 100.433 21.3353 100.937 21.606C101.45 21.8673 101.833 22.2267 102.085 22.684C102.337 23.132 102.463 23.6313 102.463 24.182C102.463 24.7793 102.304 25.3253 101.987 25.82C101.679 26.3147 101.194 26.674 100.531 26.898L102.561 31H100.503L98.6831 27.136H97.1991V31H95.4071ZM97.1991 25.82H98.8931C99.4904 25.82 99.9291 25.6753 100.209 25.386C100.489 25.0967 100.629 24.714 100.629 24.238C100.629 23.7713 100.489 23.398 100.209 23.118C99.9384 22.838 99.4951 22.698 98.8791 22.698H97.1991V25.82ZM103.5 31L107.084 21.2H109.1L112.684 31H110.78L109.996 28.732H106.174L105.376 31H103.5ZM106.664 27.332H109.506L108.078 23.258L106.664 27.332ZM113.946 31V21.2H117.544C118.328 21.2 118.972 21.3353 119.476 21.606C119.989 21.8673 120.372 22.2267 120.624 22.684C120.876 23.132 121.002 23.6313 121.002 24.182C121.002 24.7793 120.843 25.3253 120.526 25.82C120.218 26.3147 119.733 26.674 119.07 26.898L121.1 31H119.042L117.222 27.136H115.738V31H113.946ZM115.738 25.82H117.432C118.029 25.82 118.468 25.6753 118.748 25.386C119.028 25.0967 119.168 24.714 119.168 24.238C119.168 23.7713 119.028 23.398 118.748 23.118C118.477 22.838 118.034 22.698 117.418 22.698H115.738V25.82ZM126.005 31V21.2H132.403V22.642H127.797V25.33H131.983V26.73H127.797V29.558H132.403V31H126.005ZM134.098 31V21.2H136.226L139.348 27.416L142.428 21.2H144.556V31H142.764V24.238L140.034 29.6H138.62L135.89 24.238V31H134.098ZM154.232 31.168C153.242 31.168 152.393 30.958 151.684 30.538C150.974 30.1087 150.428 29.516 150.046 28.76C149.663 27.9947 149.472 27.1127 149.472 26.114C149.472 25.1153 149.663 24.2333 150.046 23.468C150.428 22.7027 150.974 22.1053 151.684 21.676C152.393 21.2467 153.242 21.032 154.232 21.032C155.408 21.032 156.369 21.326 157.116 21.914C157.872 22.4927 158.343 23.3093 158.53 24.364H156.556C156.434 23.832 156.173 23.4167 155.772 23.118C155.38 22.81 154.857 22.656 154.204 22.656C153.298 22.656 152.589 22.964 152.076 23.58C151.562 24.196 151.306 25.0407 151.306 26.114C151.306 27.1873 151.562 28.032 152.076 28.648C152.589 29.2547 153.298 29.558 154.204 29.558C154.857 29.558 155.38 29.418 155.772 29.138C156.173 28.8487 156.434 28.452 156.556 27.948H158.53C158.343 28.956 157.872 29.7447 157.116 30.314C156.369 30.8833 155.408 31.168 154.232 31.168ZM164.708 31.168C163.728 31.168 162.869 30.9533 162.132 30.524C161.404 30.0947 160.83 29.502 160.41 28.746C159.999 27.9807 159.794 27.0987 159.794 26.1C159.794 25.1013 159.999 24.224 160.41 23.468C160.83 22.7027 161.404 22.1053 162.132 21.676C162.869 21.2467 163.728 21.032 164.708 21.032C165.679 21.032 166.533 21.2467 167.27 21.676C168.007 22.1053 168.581 22.7027 168.992 23.468C169.403 24.224 169.608 25.1013 169.608 26.1C169.608 27.0987 169.403 27.9807 168.992 28.746C168.581 29.502 168.007 30.0947 167.27 30.524C166.533 30.9533 165.679 31.168 164.708 31.168ZM164.708 29.558C165.641 29.558 166.383 29.25 166.934 28.634C167.494 28.018 167.774 27.1733 167.774 26.1C167.774 25.0267 167.494 24.182 166.934 23.566C166.383 22.95 165.641 22.642 164.708 22.642C163.775 22.642 163.028 22.95 162.468 23.566C161.908 24.182 161.628 25.0267 161.628 26.1C161.628 27.1733 161.908 28.018 162.468 28.634C163.028 29.25 163.775 29.558 164.708 29.558ZM171.19 31V21.2H172.982L177.588 28.102V21.2H179.38V31H177.588L172.982 24.112V31H171.19ZM183.562 31V22.642H180.706V21.2H188.224V22.642H185.354V31H183.562ZM187.883 31L191.467 21.2H193.483L197.067 31H195.163L194.379 28.732H190.557L189.759 31H187.883ZM191.047 27.332H193.889L192.461 23.258L191.047 27.332ZM199.572 31V22.642H196.716V21.2H204.234V22.642H201.364V31H199.572ZM209.798 31.168C208.818 31.168 207.959 30.9533 207.222 30.524C206.494 30.0947 205.92 29.502 205.5 28.746C205.089 27.9807 204.884 27.0987 204.884 26.1C204.884 25.1013 205.089 24.224 205.5 23.468C205.92 22.7027 206.494 22.1053 207.222 21.676C207.959 21.2467 208.818 21.032 209.798 21.032C210.769 21.032 211.623 21.2467 212.36 21.676C213.097 22.1053 213.671 22.7027 214.082 23.468C214.493 24.224 214.698 25.1013 214.698 26.1C214.698 27.0987 214.493 27.9807 214.082 28.746C213.671 29.502 213.097 30.0947 212.36 30.524C211.623 30.9533 210.769 31.168 209.798 31.168ZM209.798 29.558C210.731 29.558 211.473 29.25 212.024 28.634C212.584 28.018 212.864 27.1733 212.864 26.1C212.864 25.0267 212.584 24.182 212.024 23.566C211.473 22.95 210.731 22.642 209.798 22.642C208.865 22.642 208.118 22.95 207.558 23.566C206.998 24.182 206.718 25.0267 206.718 26.1C206.718 27.1733 206.998 28.018 207.558 28.634C208.118 29.25 208.865 29.558 209.798 29.558Z" fill="white" />
            </svg>
          </Link>

        </DialogContent>
        <DialogActions>
          <Button autoFocus onClick={handleClose}>
            Ok
          </Button>
        </DialogActions>
      </BootstrapDialog>
    </>
  );
}